{"version":3,"sources":["../../../src/app/content/group-management-pages/InvitationLandingPage.tsx"],"names":["React","useState","useEffect","GroupsServiceClient","Button","Checkbox","HelperText","HelperTextItem","Hint","HintBody","Modal","ModalVariant","Tooltip","Loading","InvitationLandingPage","props","groupsService","invitationId","match","params","invitation_id","invitationData","setInvitationData","loading","setLoading","acceptAup","setAcceptAup","actionBlocked","setActionBlocked","getInvitation","doGet","then","response","status","data","catch","err","console","log","acceptInvitation","doPost","history","push","rejectInvitation","forMember","Object","keys","length","groupEnrollmentConfiguration","group","name","groupRoles","map","role","index","attributes","description","membershipExpirationDays","aup","url","trigger","isVisible","ResponseModal","isModalOpen","setIsModalOpen","active","small","close","type"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {FC,useState,useEffect} from 'react';\r\n// @ts-ignore\r\nimport { HttpResponse, GroupsServiceClient } from '../../groups-mngnt-service/groups.service';\r\nimport { Button, Checkbox, DataList, DataListCell, DataListItem, DataListItemCells, DataListItemRow, HelperText, HelperTextItem, Hint, HintBody, Modal, ModalVariant, Tooltip } from '@patternfly/react-core';\r\nimport { Loading } from '../../group-widgets/LoadingModal';\r\n//import { ContentPage } from '../ContentPage';\r\n//import { TableComposable, Caption, Thead, Tr, Th, Tbody, Td } from '@patternfly/react-table';\r\n\r\n\r\n\r\n\r\nexport interface InvitationLandingPageProps {\r\n  match:any;\r\n  history:any;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// export class GroupPage extends React.Component<GroupsPageProps, GroupsPageState> {\r\nexport const InvitationLandingPage: FC<InvitationLandingPageProps> = (props)=> {\r\n\r\n  let groupsService = new GroupsServiceClient();\r\n\r\n  const [invitationId] = useState(props.match.params.invitation_id);\r\n  const [invitationData,setInvitationData] =  useState<any>({});\r\n  const [loading,setLoading] = useState(false);\r\n  const [acceptAup,setAcceptAup] = useState(false);\r\n  const [actionBlocked, setActionBlocked] = useState(false);\r\n\r\n\r\n  useEffect(()=>{\r\n    getInvitation();    \r\n  },[])\r\n\r\n\r\n  \r\n  let getInvitation = () =>{\r\n    setLoading(true);\r\n    groupsService!.doGet<any>(\"/user/invitation/\"+invitationId)\r\n      .then((response: HttpResponse<any>) => {\r\n        setLoading(false);\r\n        if(response.status===200&&response.data){\r\n          setInvitationData(response.data);\r\n        }\r\n        else{\r\n          \r\n        }\r\n        \r\n    }).catch((err)=>{\r\n      console.log(err);\r\n      setLoading(false);\r\n    })\r\n  }\r\n\r\n\r\n  const acceptInvitation = () =>{\r\n    setLoading(true);\r\n    groupsService!.doPost<any>(\"/user/invitation/\"+invitationId+ \"/accept\",{})\r\n      .then((response: HttpResponse<any>) => {\r\n        setLoading(false);\r\n        if(response.status===200||response.status===204){\r\n          props.history.push('/groups/showgroups');\r\n        }\r\n        else{\r\n          setActionBlocked(true);          \r\n        }\r\n    }).catch((err)=>{\r\n      setActionBlocked(true);          \r\n      setLoading(false);\r\n    })\r\n  }\r\n\r\n  const rejectInvitation = () =>{\r\n    setLoading(true);\r\n    groupsService!.doPost<any>(\"/user/invitation/\"+invitationId+ \"/reject\",{})\r\n      .then((response: HttpResponse<any>) => {\r\n        setLoading(false);\r\n        if(response.status===200||response.status===204){\r\n          props.history.push('/groups/showgroups');\r\n\r\n        }\r\n        else{ \r\n          setActionBlocked(true);\r\n        }\r\n    }).catch((err)=>{\r\n      setActionBlocked(true);          \r\n\r\n      setLoading(false);\r\n    })\r\n  }\r\n\r\n  \r\n  return (\r\n\r\n    <>\r\n      <div className=\"gm_invitation-container\">\r\n\r\n        <Loading active={loading}/>\r\n        <ResponseModal type={invitationData?.forMember} close={()=>{\r\n          setActionBlocked(false);\r\n          props.history.push('/groups/showgroups');\r\n        }} active={actionBlocked}/>\r\n        {Object.keys(invitationData).length  >0 ?\r\n          <>\r\n            <span className=\"gm_invitation-landing-title\">Welcome to {invitationData?.groupEnrollmentConfiguration?.group?.name||invitationData?.group?.name}</span>\r\n            <div className=\"gm_invitation-content-container\">\r\n              <Hint>\r\n                <HintBody>\r\n                  You have been invited to join as a{invitationData?.forMember?invitationData?.groupRoles.map((role,index)=>{return <strong> {role}{index !== invitationData.groupRoles.length - 1&&','}</strong>}):'n admin'}.\r\n                </HintBody>\r\n              </Hint>\r\n              {(invitationData?.groupEnrollmentConfiguration?.group?.attributes?.description||invitationData?.group?.attributes?.description)&&<div className=\"gm_invitation-purpuse\">\r\n                <h1>Description</h1>\r\n                {invitationData?.groupEnrollmentConfiguration?.group?.attributes?.description[0]||invitationData?.group?.attributes?.description[0]}\r\n              </div>}\r\n              {invitationData?.forMember&&invitationData?.groupEnrollmentConfiguration?.membershipExpirationDays&&\r\n                    <HelperText>\r\n                    <HelperTextItem variant=\"warning\" hasIcon>\r\n                      <p>This membership expires in <strong>{invitationData?.groupEnrollmentConfiguration?.membershipExpirationDays} days</strong> after enrollment.</p></HelperTextItem>\r\n                    </HelperText>\r\n              }\r\n              {invitationData?.groupEnrollmentConfiguration?.aup?.url?\r\n                <>\r\n                  <p>\r\n                    Before joining, you must review the <a href={invitationData?.groupEnrollmentConfiguration?.aup?.url} target=\"_blank\" rel=\"noreferrer\">acceptable use policy (AUP)</a> and accept it.\r\n                  </p>\r\n                  <div className=\"gm_checkbox-container\">\r\n                    <Checkbox\r\n                      onClick={()=>{setAcceptAup(!acceptAup)}}\r\n                      checked={acceptAup}\r\n                      id=\"description-check-1\"\r\n                      label=\"I have read the terms and accept them\"\r\n                    />\r\n                  </div>\r\n                </> \r\n              :\"\"}\r\n        \r\n              <div className=\"gm_invitation-response-container\">\r\n                <Tooltip  {...(!(invitationData?.groupEnrollmentConfiguration?.aup?.url&&!acceptAup) ? { trigger:'manual', isVisible:false }:{trigger:'mouseenter'})} content={<div>First accept the terms and conditions</div>}>\r\n                  <div className=\"gm_invitation-response-button-container\">\r\n                    <Button isDisabled={invitationData?.groupEnrollmentConfiguration?.aup?.url&&!acceptAup} onClick={acceptInvitation}>Accept</Button>\r\n                  </div>\r\n                </Tooltip>\r\n                <Button variant=\"danger\" onClick={rejectInvitation}>Reject</Button>\r\n              </div>\r\n            </div>\r\n          </>\r\n          :\r\n          <span className=\"gm_invitation-landing-title\">Invitation Could not be found</span>\r\n        }\r\n      \r\n      </div>\r\n\r\n    </>  \r\n  )\r\n};\r\n\r\n\r\nconst ResponseModal: React.FC<any> = (props) => {\r\n  const [isModalOpen,setIsModalOpen] = useState(false);\r\n  useEffect(()=>{    \r\n    setIsModalOpen(!!props.active)\r\n  },[props.active])\r\n\r\n  return(\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={\"Invitation Could not be accepted\"}\r\n      isOpen={isModalOpen}\r\n      \r\n      onClose={()=>{props.close()}}\r\n      actions={[         <Button key=\"confirm\" variant=\"primary\" onClick={()=>{props.close()}}>\r\n      OK\r\n    </Button>]}\r\n    ><>\r\n      Please make sure you are not already a group{props.type?\" member\":\" admin\"}.\r\n    </></Modal>\r\n  )\r\n}"],"file":"InvitationLandingPage.js"}